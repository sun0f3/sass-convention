<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Sass-convention : rails-sass-convention" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Sass-convention</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/varlamoved/sass-convention">View on GitHub</a>

          <h1 id="project_title">Sass-convention</h1>
          <h2 id="project_tagline">rails-sass-convention</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/varlamoved/sass-convention/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/varlamoved/sass-convention/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>VERSION 0.3</h1>

<h2>Договоренность в CSS</h2>

<p>Вашему вниманию предлагается свод договоренностей по оформлению CSS и верстки
в нашем проекте DOMGEO. Предлагается за основу, взять Яндекс БЭМ и подстроить
их под наш проект.</p>

<h3>ВСТУПЛЕНИЕ : Почему нам это может быть полезно ?!</h3>

<p>Сейчас в проекте у нас скопилось много css стилей.
  Они справляются со своей задачей. В данный момент
  основной прием, который нас спасает - это scss вложенность стилей.</p>

<p>Из-за чего появляется уже сейчас ряд проблем:</p>

<ul>
<li>мертвые стили
Один добавил стиль, другой поправил верстку - стиль не удаляется из-за боязни использования стиля где-то еще)</li>
</ul><p><em><strong>ПРОБЛЕМА</strong>: Невозможно однозначно ответить на вопрос, где еще используется этот стиль</em></p>

<ul>
<li>
<p>перекрестная зависимость стилей
Уже неоднакратно читая css сталкиваюсь с подобными случаями, когда</p>

<ul>
<li>селекторы дублируется и описываются</li>
<li>встречаются артефакты непонятной зависимости стилей друго от друга</li>
<li>иногда селекторы лежат в разных файлах!!!
И прочая "радость" катастрофически усложняет модификацию и поддержку css в рабочем состоянии.</li>
</ul>
<p>ПРОБЛЕМА: Зомби-эффект. Вроде живо, а как "дотронешься" - все разваливается
ПРОБЛЕМА: Нет однозначного места для описания конкретного стиля</p>
</li>
<li>
<p>сложность чтения верстки и css
Видя структуру
  .tabs.properties
    .list
      %span
  Нельзя однозначно понять семантику оформления
  Вопросы</p>

<ul>
<li>Кто является главным-блоком, относительно которого описаны оформление потомков? (Вложенностью)</li>
<li>Или основной блок выше? :)</li>
<li>.list это независимый блок или его оформлением занимается .tabs? а может .properties?</li>
<li>Что делает стиль .properties?</li>
<li>.properties уточняет стиль .tabs? А если уточняет, то где искать оформление .tabs (в каком файле)?</li>
<li>js обслуживает .tabs и если да, где он лежит?</li>
<li>
<p>Вы уверены что это тот же .tabs что и на другой странице?</p>

<p>Чтобы модифицировать оформление, верстку потребуется потратить больше времени.
Мы скорее не отвечаем на эти вопросы, поэтому верстку мы трогать не будем (вдруг полетит стиль, еще хуже js :)
стили не всегда понятно где лежат, поэтому мы напишем свои заново, увы.
Надо признать иногда мы так поступаем, тк действительно нет времени разобраться в неструктурированном css, js
А нужно сделать сейчас. Так появляются "разбитые окна". За несколько подходов разными разработчиками
код становится "зомби".</p>

<p>ПРОБЛЕМА: Сложность внесения изменения стилей.
ПРОБЛЕМА: Только ухудшение семантики css
ПРОБЛЕМА: Рефакторинг будет стоить очень дорого по времени &gt;&gt; написать с нуля.</p>
</li>
</ul>
</li>
<li>
<p>не использование повторяемых стилей.
Каждом раздел (app,agency,hq) должен выглядеть целостно. Это достигается за счет единого стиля оформления.
Есть набор базовых классов css, которые должны использоваться при верстке очередной страницы раздела.
Мы этим не пользуемся, точнее мы даже не знаем какие классы уже написаны, чтобы начать их использовать.
Причиной является непонимание, где описаны уже созданные базовые классы.</p>

<p>ПРОБЛЕМА: Нет единообразного оформления
ПРОБЛЕМА: Нет возможности менять оформление сразу для всего раздела за счет изменения базовых классов
ПРОБЛЕМА: Не испоьзование наработанных стилей.
ПРОБЛЕМА: Отстутствие тенденции к оформлению css, для устранение вышеописанных проблем. Отсутсвие струкутры (convetions)
ПРОБЛЕМА: Дублирование css, увеличение время на верстку</p>
</li>
<li>
<p>классы css для конкретной страницы становятся глобальными</p>

<h4>ПЕЧАЛЬНЫЙ ВЫВОД</h4>

<p>Подобные проблемы усугубляются еще тем, что над css работаем все мы по немножку. Каждый делает как ему удобнее, а часто как
быстрее. При этом забывается, что "завтра" нам придется изменить дополнить оформление и скорее это будет делать уже другой человек.
И чтобы добиться несложного результата, придется потратить кусок нервов, начать верить в Бога, и затратить времени в N раз больше
чем стоит задача.</p>

<p>Давайте не будем наступать на php-грабли, а будем на стороне добра
Вашему вниманию предлагается свод Договоренностей, которые должны устранить вышеописанные проблемы
и сделать нашу жизнь слаще и приятнее. :)</p>
</li>
</ul><h3>структура разделов app, agency, hq</h3>

<pre><code>|-- shared
|   |-- *.scss
|-- widgets
|   |-- *.scss
|-- pages
|   |-- *.scss
`-- *.scss
</code></pre>

<p>shared/
  Хранит общеиспользуемые классы для данного раздела.
  Те, которые вы можете использовать на своей странице для сохранения единого стиля оформления.
  Имя файла совпадает с префиксом классов, описанных в нем
  Пример: buttons.scss, columns.scss, flash.scss, errors.scss
  flash.scss может содержать стили для .flash, .flash_error, .flash_notice итд</p>

<p>widgets/
  Хранит стили для повторяемых компонентов, которые могут быть использованны на разных страницах
  Widget-ом будем называет повторяемые визуальные блоки со сложной версткой внутри (условно вложенность &gt;1)
  Еще одним признаком wdiget-а является - возможность подключить js (или уже существующий js класс), который
  обслуживает поведение данного блока, как самостоятельного компонента.
  Примеры: chart.scss, map.scss, tips.scss, menu.scss, tab.scss</p>

<p>pages/
  Хранит стили для конкретной страницы(action) или всего раздела(controller).
  Хранит оформление стилей для элементов конкретной страницы.
  Может видоизменять вид shared и widgets элементы для данной страницы.
  Пример: users.scss, users_show.scss # users_controller.rb</p>

<p>*.scss
  Попадает пока все что не поподает под описание shared, widgets, pages
  Возможно сюда может попасть оформление для форм.
  Внизу страницы описаны предложения для обсуждения.</p>

<h2>БЭМ</h2>

<p>Cтили определяются классом(class). Это позволяет достичь использование повторно
  компонента как на разных страницах, так и на одной страницы использовать нескольких одноименных виджетов.</p>

<h3>Именование pages</h3>

<pre><code>Префикс: p-
</code></pre>

<h5>* Варианты именования</h5>

<p>Необходимо вместе выбрать общий формат именования
        1) p-controller<em>name</em>_action_name (
            плюс: дефолтный БЭМ.
            минус: эстетика, action как модификатор - action-ы скорее независимы чeм зависимы
        2) p-controller_name-action_name
            плюс: дефолт по БЭМу.
            минус: эстетика
        3) p-controller-name-action-name
            плюс: использование одного разделителя.
            минус: неоднозначность в имени
        4) p-controller-name--action-name
            плюс: использование одного разделителя.
            минус: отсутствуют на первый взгляд</p>

<h5>* Название файла</h5>

<pre><code>    ./pages/controller_name.scss
    ./pages/controller_name_action_name.scss

  Пример
    hq/pages/users.scss       =&gt; .p-users {}
    hq/pages/users_show.scss  =&gt; .p-users-show {}
</code></pre>

<h5>* Замечания</h5>

<pre><code>    1) .p-users-show может находиться в файле  {namespace}/pages/users.scss если он занимает мало места
    2) .p-users может использоваться для всех action-ов, в случае простой верстки.
    3) Иначе .p-users определяет стиль для index.
</code></pre>

<h3>Именование widgets</h3>

<p>Префикс w-
  имя         WidgetName
  JS class    WidgetNameWidget
  Css class</p>

<h5>* Варианты именования</h5>

<pre><code>    1) w-widget_name__modifcator
      плюс: дефолт по БЭМу.
      минус: эстетика двух разделителей
    2) w-widget-name--modificator
      плюс: использование одного разделителя.
      минус: нет
</code></pre>

<h5>* Название файла</h5>

<pre><code>    ./widgets/widget_name.scss
    ./widgets/widget_name_modificator.scss

    Пример
    agency/widgets/tabs.scss =&gt; .w-tabs {} .w-tabs__vertical {}
</code></pre>

<h5>* Оформление модификаторов</h5>

<pre><code>    ./pages/tabs.scss
      .w-tabs { ... }

      //vertical
      .w-tabs__vetical {
        @extend .w-tabs;
        ...
      }
</code></pre>

<h5>* modificator VS .p-page { .w-widget {...} }</h5>

<pre><code>    Для конкретной страницы вы можете видоизменить конкретный виджет

    //Так
    .p-example_page {
      .w-widget {
        color:red;
      }
    }
    Это нормально
    Но если Вам приходится повторно делать модификацию этого виджета еще на нескольких других страницах
    Это сигнал, что следует добавить модификатор к виджету

    //Так
    ./widgets/widget/scss
    .w-widget{ ... }

    .w-widget__red {
      @extend .w-widget;
      color: red;
    }
</code></pre>

<h5>* Замечания</h5>

<pre><code>    1) .w-tabs__vertical хранится в файле {namespace}/widgets/tabs.scss
    2) .w-tabs__vertical возможно хранить в файле {namespace}/widgets/tabs_vertical.scss
    Если модификатор занимает много место.
    Но скорее это сигнал, что нужно создать отдельный виджет или пересмотреть верстку виджета.
    Открытый Вопрос: @extend класса из другого файла, возможно ли это?
</code></pre>

<h5>* ОПЦИОНАЛЬНЫЕ ДОГОВОРЕННОСТИ И ОТКРЫТЫЕ ВОПРОСЫ</h5>

<p>?Стили для формы?</p>

<p>Набор стилей для форм в разделе тоже хочется иметь ограниченное число и выдержанные в едином стиле
 Пока они лежат в корне папки (hq/propery_form)
 общие виды форм можно класть в файл shared/forms.scss
 Можно формы класть в контейнер с префиксом f- (f-property, f-inline, f-default, f-horizontal)
 Можно выделить под них папку {namespace}/forms</p>

<p>?b-block-name?
 На конкретной странице p-name скорее всего у нас могут появляться уникальные блоки
 со сложной вложенностью и конкретным визуальным оформлением, помимо виджетов.
 Нет смысла их выносить в ./widgets/
 Однака некая пометка что это блок контейнер для визуального блока упростила разбор стиля
 Можно это делать блоком с префиксом b-</p>

<p>Пример
  .p-users-show
    %h1 Вася
    .b-suggetsion
      .title
      .description
      .price
    .two_columns
      .left
      .right</p>

<p>Наличие префикса говорит что</p>

<ul>
<li>это блок и стили для .title, .description описаны отностильно него</li>
<li>блок .b-suggestion определен в /pages/users_show.scss относительно .p-users-show</li>
<li>дает возможность отличить .two_columns враппера от блока .b-suggestion за счет префикса</li>
</ul><p>Внутри блока мы используем удобные нам имена без всяких префиксов, как нам удобно :)</p>

<p>====== ПЛЮСЫ ОТ ИСПОЛЬЗОВАНИЯ CONVENTION</p>

<ul>
<li>DRY использование существующих стилей, возможность их быстро находить и модифицировать</li>
<li>Меньше затрата сил на изменения в оформлении сразу всего раздела</li>
<li>Легко проводить рефакторинг виджетов, страниц без опасения что "где-то что-то" может полететь</li>
<li>Легкость чтения кода css и haml</li>
<li>Легко искать файл со стилем только увидев его в верстке</li>
<li>
<p>Уменьшение вложенности в стилях виджетах, блоках, страницах.
Мы теперь точно знаем родителя отвечающего за оформление поэтому можем легко уходить от большой вложенности &gt;3
.w-tabs {
  ul {
    li {
      a.name {}</p>

<blockquote>
<blockquote>
<p>.w-tabs {
    a {}
    a.name {}</p>
</blockquote>
</blockquote>

<ul>
<li>Возможность установить одноименную связь с JS, которыи обслуживает конкретный виджет (об этом в "ДОГОВОРЕННОСТИ JS")</li>
</ul>
</li>
</ul><p>===== ИСОПЛЬЗОВАНИЕ id
 Написание стилей с использованием id не допускается.
 Приоритет стиля id (100) много больше приоритета стиля, использующего класс (10), поэтому
 изменить поведение объекта будет очень сложно в другом стиле.</p>

<p>id использутся только для поиска элементов в JS</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Sass-convention maintained by <a href="https://github.com/varlamoved">varlamoved</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
